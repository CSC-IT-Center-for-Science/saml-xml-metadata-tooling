<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<title>Validate debug</title>

	<script src="//code.jquery.com/jquery-2.2.4.min.js"></script>
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous" />
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous" />
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"
      type="text/css"  />
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
	<style>
	.glyphicon-spin {
    	-webkit-animation: spin 1000ms infinite linear;
    	animation: spin 1000ms infinite linear;
	}
	@-webkit-keyframes spin {
	  0% {
	    -webkit-transform: rotate(0deg);
	    transform: rotate(0deg);
	  }
	  100% {
	    -webkit-transform: rotate(359deg);
	    transform: rotate(359deg);
	  }
	}
	@keyframes spin {
	  0% {
	    -webkit-transform: rotate(0deg);
	    transform: rotate(0deg);
	  }
	  100% {
	    -webkit-transform: rotate(359deg);
	    transform: rotate(359deg);
	  }
	}	
	</style>
</head>
<body>
<div class="container">
	<div class="col-md-12">
		<h1>Diff debug</h1>
	</div>
	<div class="col-sm-12">
		<p>
		<button class="btn btn-default req" 
					data-loading-text="<span class='glyphicon glyphicon-refresh glyphicon-spin' aria-hidden='true'></span>" 
					data-done-text="<span class='glyphicon glyphicon-ok' aria-hidden='true'></span>"
					data-error-text="<span class='glyphicon glyphicon-remove' aria-hidden='true'></span>"
					id="reqTaskHaka">checkValidUntil
		</button>
		<button class="btn btn-default req" 
					data-loading-text="<span class='glyphicon glyphicon-refresh glyphicon-spin' aria-hidden='true'></span>" 
					data-done-text="<span class='glyphicon glyphicon-ok' aria-hidden='true'></span>"
					data-error-text="<span class='glyphicon glyphicon-remove' aria-hidden='true'></span>"
					id="reqTaskHaka">checkSchema
		</button>
		<button class="btn btn-default req" 
				data-loading-text="<span class='glyphicon glyphicon-refresh glyphicon-spin' aria-hidden='true'></span>" 
				data-done-text="<span class='glyphicon glyphicon-ok' aria-hidden='true'></span>"
				data-error-text="<span class='glyphicon glyphicon-remove' aria-hidden='true'></span>"
				id="reqTaskHaka">checkSig
		</button>
		<button class="btn btn-default req" 
					data-loading-text="<span class='glyphicon glyphicon-refresh glyphicon-spin' aria-hidden='true'></span>" 
					data-done-text="<span class='glyphicon glyphicon-ok' aria-hidden='true'></span>"
					data-error-text="<span class='glyphicon glyphicon-remove' aria-hidden='true'></span>"
					id="reqTaskHaka">checkCertsEqual
		</button>
		<button class="btn btn-default req" 
					data-loading-text="<span class='glyphicon glyphicon-refresh glyphicon-spin' aria-hidden='true'></span>" 
					data-done-text="<span class='glyphicon glyphicon-ok' aria-hidden='true'></span>"
					data-error-text="<span class='glyphicon glyphicon-remove' aria-hidden='true'></span>"
					id="reqTaskHaka">checkCertValidity
		</button>
		</p>
		<button class="btn btn-default req" 
					data-loading-text="<span class='glyphicon glyphicon-refresh glyphicon-spin' aria-hidden='true'></span>" 
					data-done-text="<span class='glyphicon glyphicon-ok' aria-hidden='true'></span>"
					data-error-text="<span class='glyphicon glyphicon-remove' aria-hidden='true'></span>"
					id="reqTaskHaka">reqTask
		</button>
		<p>
	</div>
</div>
<script type="text/javascript">

$('.req').on('click', function ( event ) {
	event.preventDefault(); 
	var btn = $(this);
	var op = btn.text().trim();
	btn.button('loading');
	$.get( 'ctrl?op=' + op, function ( data ) {
		switch (data.status) {
			case "error":
				btn.button('error');
				setTimeout(function () {
					btn.button('reset');
				}, 3000);
				break;
			case "ok":
				btn.button('reset');				
		}
	});
});

</script>
</body>
</html>